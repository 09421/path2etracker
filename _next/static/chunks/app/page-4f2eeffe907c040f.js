(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2743:(e,t,r)=>{Promise.resolve().then(r.bind(r,5969)),Promise.resolve().then(r.bind(r,8686)),Promise.resolve().then(r.bind(r,7193))},4895:(e,t,r)=>{"use strict";r.d(t,{CombatantProvider:()=>i,Q:()=>d});var a=r(5155),n=r(2115);let s=(0,n.createContext)(null);function i(e){let{children:t}=e,r=function(){let[e,t]=(0,n.useState)([]),[r,a]=(0,n.useState)(0);return{combatants:e,setCombatants:t,addCombatant:e=>t(t=>[...t,e]),removeCombatant:e=>t(t=>t.filter(t=>t.id!==e)),damage:function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t(t=>t.map(t=>t.id===e?{...t,currentHP:Math.max(0,t.currentHP-r)}:t))},heal:function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t(t=>t.map(t=>t.id===e?{...t,currentHP:Math.min(t.maxHP,t.currentHP+r)}:t))},currentTurnIndex:r,nextTurn:()=>a(t=>{let r=e.length;return 0===r?0:(t+1)%r}),previousTurn:()=>a(t=>0===e.length?0:(t-1+e.length)%e.length)}}();return(0,a.jsx)(s.Provider,{value:r,children:t})}function d(){let e=(0,n.useContext)(s);if(!e)throw Error("useCombatants must be used within a CombatantProvider");return e}},5969:(e,t,r)=>{"use strict";r.d(t,{AddCombatantForm:()=>d});var a=r(5155),n=r(2115),s=r(4895),i=r(1368);function d(){let{addCombatant:e}=(0,s.Q)(),[t,r]=(0,n.useState)(""),[d,l]=(0,n.useState)(0),[o,u]=(0,n.useState)(10);return(0,a.jsx)("form",{onSubmit:a=>{a.preventDefault(),e({id:(0,i.A)(),name:t,initiative:d,maxHP:o,currentHP:o}),r(""),l(0),u(10)},className:"space-y-4 bg-white p-4 rounded shadow",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",placeholder:"Name",value:t,onChange:e=>r(e.target.value),className:"flex-1 border p-2 rounded",required:!0}),(0,a.jsx)("input",{type:"number",placeholder:"Initiative",value:d,onChange:e=>l(parseInt(e.target.value)),className:"w-24 border p-2 rounded",required:!0}),(0,a.jsx)("input",{type:"number",placeholder:"Max HP",value:o,onChange:e=>u(parseInt(e.target.value)),className:"w-24 border p-2 rounded",required:!0}),(0,a.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded",children:"Add"})]})})}},7193:(e,t,r)=>{"use strict";r.d(t,{ThemeToggle:()=>s});var a=r(5155),n=r(2115);function s(){let[e,t]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{document.documentElement.classList.toggle("dark",e)},[e]),(0,a.jsxs)("button",{className:"p-2 border rounded bg-gray-200 dark:bg-gray-700 dark:text-white",onClick:()=>t(!e),children:["Toggle ",e?"Light":"Dark"," Mode"]})}},8686:(e,t,r)=>{"use strict";r.d(t,{CombatantList:()=>u});var a=r(5155),n=r(4895),s=r(5143),i=r(402),d=r(8266),l=r(2115);function o(e){let{combatant:t,damage:r,heal:n,removeCombatant:s}=e,{attributes:o,listeners:u,setNodeRef:c,transform:m,transition:h}=(0,i.gl)({id:t.name}),[g,x]=(0,l.useState)(""),b=()=>{let e=parseInt(g,10);!isNaN(e)&&(e<0?r(t.id,Math.abs(e)):e>0&&n(t.id,e)),x("")},p={transform:d.Ks.Transform.toString(m),transition:h};return(0,a.jsxs)("div",{ref:c,style:p,className:"bg-white dark:bg-gray-800 p-4 rounded shadow flex items-center justify-between",children:[(0,a.jsx)("div",{...o,...u,className:"cursor-grab",children:"⠿ "}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:t.name}),(0,a.jsxs)("p",{className:"text-gray-700 dark:text-gray-300",children:["Initiative: ",t.initiative]}),(0,a.jsxs)("p",{className:"text-gray-700 dark:text-gray-300",children:["HP: ",t.currentHP," / ",t.maxHP]})]}),(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),s(t.id)},className:"bg-gray-300 dark:bg-gray-700 dark:text-white px-2 py-1 rounded",children:"✕"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("input",{type:"number",value:g,onChange:e=>x(e.target.value),onKeyDown:e=>"Enter"===e.key&&b(),className:"w-20 px-2 py-1 border rounded",placeholder:"+/- HP"}),(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),b()},className:"bg-blue-500 text-white px-2 py-1 rounded",children:"Apply"})]})]})}function u(){let{combatants:e,setCombatants:t,damage:r,heal:d,removeCombatant:l,currentTurnIndex:u,nextTurn:c}=(0,n.Q)(),m=(0,s.FR)((0,s.MS)(s.AN),(0,s.MS)(s.uN)),h=[...e].sort((e,t)=>t.initiative-e.initiative);return(0,a.jsxs)("div",{children:[(0,a.jsx)(s.Mp,{sensors:m,collisionDetection:s.fp,onDragEnd:r=>{let{active:a,over:n}=r;if(n&&a.id!==n.id){let r=e.findIndex(e=>e.name===a.id),s=e.findIndex(e=>e.name===n.id);t((0,i.be)(e,r,s))}},children:(0,a.jsx)(i.gB,{items:h.map(e=>e.name),strategy:i._G,children:(0,a.jsx)("div",{className:"space-y-4",children:h.map((e,t)=>(0,a.jsx)("div",{className:"p-4 rounded shadow flex items-center justify-between transition-all\n                ".concat(t===u?"bg-blue-100 dark:bg-blue-900":"bg-white dark:bg-gray-800"),children:(0,a.jsx)(o,{combatant:e,damage:r,heal:d,removeCombatant:l},e.id)},e.id))})})}),(0,a.jsx)("div",{className:"flex justify-end mb-4",children:(0,a.jsx)("button",{onClick:c,className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"Next Turn"})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[607,441,684,358],()=>t(2743)),_N_E=e.O()}]);